<element name="edit-todo">
  <template>
    <style>
    %ID% {
      font: 14px 'Helvetica Neue', Helvetica, Arial, sans-serif;
    }
    %ID% .edit {
      position: relative;
      margin: 0;
      width: 100%;
      font-size: 24px;
      font-family: inherit;
      line-height: 1.4em;
      border: 0;
      outline: none;
      color: inherit;
      padding: 6px;
      border: 1px solid #999;
      box-shadow: inset 0 -1px 5px 0 rgba(0, 0, 0, 0.2);
      -moz-box-sizing: border-box;
      -ms-box-sizing: border-box;
      -o-box-sizing: border-box;
      box-sizing: border-box;
      -webkit-font-smoothing: antialiased;
      -moz-font-smoothing: antialiased;
      -ms-font-smoothing: antialiased;
      -o-font-smoothing: antialiased;
      font-smoothing: antialiased;
    }
    </style>
    <content></content>
    <input class="edit" value="{{value}}" type="text"  {{on 'keyup' 'inputModified'}} {{on 'focusout' 'doneEditing'}}>
  </template>
  <script>
    return ({
      value: 'Default Value',
      arr: [{f:1}, {g:2}],
      obj: {a:1, b:2},
      createdCallback: function(event){
        this.oldValue = this.get('value');
      },
      attachedCallback: function(event){
        $input = this.el.querySelector('input.edit');
        $input.focus();
        $input.selectionStart = $input.selectionEnd = $input.value.length;
      },
      detachedCallback: function(){

      },
      doneEditing: function(event){
        this.set('editing', false);
      },
      inputModified: function(event){
        // If enter
        if(event.keyCode == 13)
          this.set('editing', false);

        // If escape
        if(event.keyCode == 27){
          this.set({'value': this.oldValue, 'editing': false});
        }
      }
    })
  </script>
</element>
